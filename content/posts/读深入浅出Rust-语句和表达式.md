---
title: "读深入浅出Rust 语句和表达式"
date: 2024-02-29T14:49:37Z
draft: true
---

太基础了，不想写也不想看了。
<!--more-->
# 0x00 | 语句块表达式
Rust中有“语句块表达式”，具体就是，语句块（用{}括起来的部分）是可以作为表达式的，其值为整个语句块最后的一个值。
例如，考虑如下代码：
```rust
fn main() {
    let x = {println!("你好");114;514};
    println!("{:?}",x);
}
```
输出如下：
```
你好
514
```
某种意义上类似于C的逗号表达式？

另外，该语法也可以让代码有一种函数式编程的既视感
```rust
fn add(x: i32, y: i32) -> i32 {
	x + y
}
```
如果函数体也缩到上面那行，就更像了。

# 0x01 | 一种漏写else的情况
```rust
fn invalid_expr(cond: bool) -> i32 {
	if cond {
		42
	}
}
```
这段代码会因为缺失!cond时的分支而报错。如果不添加格外的分支，当!cond时，函数将会尝试返回()，而返回类型是i32。

这本质上是rust的语句块表达式造成的一个不太容易被发现的语法问题。